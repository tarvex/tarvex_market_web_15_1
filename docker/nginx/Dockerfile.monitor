FROM alpine:latest

# Install required packages
RUN apk add --no-cache bash mailx

# Copy monitoring script
COPY monitor_rate_limit.sh /usr/local/bin/
RUN chmod +x /usr/local/bin/monitor_rate_limit.sh

# Create log directory
RUN mkdir -p /var/log/nginx

# Set up volume for logs
VOLUME ["/var/log/nginx"]

# Start monitoring
CMD ["/usr/local/bin/monitor_rate_limit.sh"] 